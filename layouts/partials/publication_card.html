<div class="flex flex-col p-6 my-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-neutral-800 dark:border-neutral-700">
    <div class="flex-1">
        <h3 class="text-xl font-bold text-gray-900 dark:text-white">
            {{ .Title }}
        </h3>
        <p class="mt-1 text-sm text-gray-600 dark:text-neutral-400">
            {{ .Params.authors | markdownify }}
        </p>
        <p class="mt-2 text-base italic text-gray-700 dark:text-neutral-300">
            {{ .Params.journal }} {{ if .Params.year }}({{ .Params.year }}){{ end }}
        </p>
    </div>

    <!-- Utility Belt -->
    <div class="flex flex-wrap gap-2 mt-4">
        {{ if .Params.pdf }}
        <a href="{{ .Params.pdf }}" target="_blank" class="px-3 py-1 text-xs font-medium text-blue-600 border border-blue-600 rounded-full hover:bg-blue-600 hover:text-white transition-colors">
            Journal PDF
        </a>
        {{ end }}
        
        {{ if .Params.arxiv }}
        <a href="{{ .Params.arxiv }}" target="_blank" class="px-3 py-1 text-xs font-medium text-gray-600 border border-gray-600 rounded-full hover:bg-gray-600 hover:text-white transition-colors">
            ArXiv
        </a>
        {{ end }}

        {{ if .Params.code }}
        <a href="{{ .Params.code }}" target="_blank" class="px-3 py-1 text-xs font-medium text-green-600 border border-green-600 rounded-full hover:bg-green-600 hover:text-white transition-colors">
            Code
        </a>
        {{ end }}

        {{ if .Params.bibtex }}
        <button onclick="copyBibTeX('{{ .File.UniqueID }}')" class="px-3 py-1 text-xs font-medium text-purple-600 border border-purple-600 rounded-full hover:bg-purple-600 hover:text-white transition-colors">
            Copy BibTeX
        </button>
        <div id="bib-{{ .File.UniqueID }}" class="hidden">{{ .Params.bibtex }}</div>
        {{ end }}

        {{ if .Params.featured }}
        <a href="{{ .RelPermalink }}" target="_blank" class="px-3 py-1 text-xs font-medium text-orange-600 border border-orange-600 rounded-full hover:bg-orange-600 hover:text-white transition-colors">
            Details
        </a>
        {{ end }}
    </div>
</div>

<script>
function copyBibTeX(id) {
    const bibContent = document.getElementById('bib-' + id).innerText;
    navigator.clipboard.writeText(bibContent).then(() => {
        showToast('Copied!');
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

function showToast(message) {
    let toast = document.getElementById('toast-notification');
    if (!toast) {
        toast = document.createElement('div');
        toast.id = 'toast-notification';
        toast.className = 'fixed bottom-5 right-5 px-4 py-2 bg-gray-900 text-white rounded-lg shadow-lg opacity-0 transition-opacity duration-300 z-50';
        document.body.appendChild(toast);
    }
    toast.innerText = message;
    toast.classList.remove('opacity-0');
    setTimeout(() => {
        toast.classList.add('opacity-0');
    }, 2000);
}
</script>
