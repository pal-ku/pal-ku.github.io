<!doctype html>
<html lang="{{ with site.Params.isoCode | default (site.LanguageCode | default `en`) }}{{- . -}}{{ end }}"
    dir="{{ cond (site.Params.rtl | default false) `rtl` `ltr` }}" class="scroll-smooth overflow-x-hidden"
    data-default-appearance="{{ site.Params.defaultAppearance | default `light` }}"
    data-auto-appearance="{{ site.Params.autoSwitchAppearance | default `true` }}">
{{- partial "head.html" . -}}
{{- partialCached "init.html" . -}}

{{/*
OVERRIDE: Using min-h-screen instead of h-screen to fix sticky header behavior.
Body is full width (w-full) to allow edge-to-edge sections naturally.
Constraints are handled by individual sections or the main wrapper for non-home pages.
*/}}
{{ $bodyLayout := "flex flex-col min-h-screen leading-7 w-full" }}
{{ $bodyColor := "text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral" }}

<body
    class="{{ $bodyLayout }} {{ $bodyColor }} {{ if site.Params.enableStyledScrollbar | default true }}bf-scrollbar{{ end }}">
    <div id="the-top" class="absolute flex self-center">
        <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
            href="#main-content">
            <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
            {{ i18n "nav.skip_to_main" }}
        </a>
    </div>

    {{/* Header - Sticky positioning for natural layout flow */}}
    {{ $header := print "header/" site.Params.header.layout ".html" }}
    {{ if templates.Exists ( printf "partials/%s" $header ) }}
    {{ partial $header . }}
    {{ else }}
    {{ partial "header/basic.html" . }}
    {{ end }}

    {{/* Main Content Wrapper - z-0 ensures it stays below sticky header */}}
    <div class="relative flex flex-col grow z-0">
        <main id="main-content" class="grow">
            {{ if .IsHome }}
            {{/* Home handles its own containers for breakouts */}}
            {{ block "main" . }}{{ end }}
            {{ else }}
            {{/* All other pages get the standard theme constraint */}}
            <div class="max-w-7xl mx-auto px-6 sm:px-14 md:px-24 lg:px-32 w-full">
                {{ block "main" . }}{{ end }}
            </div>
            {{ end }}

            {{ if and (site.Params.footer.showScrollToTop | default true) }}
            {{- partial "scroll-to-top.html" . -}}
            {{ end }}
        </main>

        {{/* Footer */}}
        <div class="max-w-7xl mx-auto w-full px-6 sm:px-14 md:px-24 lg:px-32">
            {{- partial "footer.html" . -}}
        </div>

        {{ if site.Params.enableSearch | default false }}
        {{- partial "search.html" . -}}
        {{ end }}
    </div>
</body>
{{ if site.Params.buymeacoffee.globalWidget | default false }}
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
    data-id="{{ site.Params.buymeacoffee.identifier }}" data-description="Support me on Buy me a coffee!" {{ with
    site.Params.buymeacoffee.globalWidgetMessage }}data-message="{{ . }}" {{ end }} {{ with
    site.Params.buymeacoffee.globalWidgetColor | default `#FFDD00` }}data-color="{{ . }}" {{ end }} {{ with
    site.Params.buymeacoffee.globalWidgetPosition }}data-position="{{ . }}" {{ end }} data-x_margin="18"
    data-y_margin="18"></script>
{{ end }}

</html>